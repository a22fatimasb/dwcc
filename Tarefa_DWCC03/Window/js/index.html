<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Exercicio Window con JavaScript</title>
  </head>
  <body>
    <h1>XanelaPrincipal</h1>
    <button onclick="pedirPermisoAoUsuario()">Abrir Xanela Remota</button>
    <button onclick="pecharVentaSecundaria()">Pechar Xanela Remota</button>
    <button onclick="aumentarTamanoVenta()">Aumentar Tamaño de Xanela</button>
    <button onclick="redimensionarVenta()">Redimensionar Xanela</button>
    <button onclick="desprazarVentaSecundaria()">Desprazar Xanela</button>

    <script src="utilidades.js"></script>
    <script type="text/javascript">
      // Declaramos a variable ventaSecundaria
      let ventaSecundaria;

      // Pedimos permiso para abrir unha nova ventá.
      function pedirPermisoAoUsuario() {
        const permisoUsuario = prompt(
          "¿Acepta que se abra unha xanela nova? Pulse 's' para si e 'n' para non."
        );
        // Verificamos que o usuario dou permiso
        if (permisoUsuario === "s") {
          abrirVentaSecundaria();
        } else {
          alert("O usuario non deu permiso para abrir a nova xanela.");
        }
      }

      // Abre a nova xanela coas propiedades especificadas.
      function abrirVentaSecundaria() {
        // A xanela deberá ter as seguintes propiedades: sen barras de ferramentas nin menú. Terá 300px de ancho x 300px de alto e se colocará a 400px x 400px.
        ventaSecundaria = window.open(
          "",
          "_blank",
          "width=300, height=300, top=400, left=400, toolbar=no, menubar=no"
        );

        if (ventaSecundaria) {
          // Crear un ficheiro HTML
          ventaSecundaria.document.write(`
            <h3>Exemplo de Xanela nova</h3>
            <p>URL: ${window.location.href}</p>
            <p>Protocolo: ${window.location.protocol}</p>
            <p>Navegador: ${navigator.userAgent}</p>
            <p>Java está dispoñible: ${
              navigator.javaEnabled() ? "Sí" : "Non"
            }</p>
            
        `);
          // Asegura que a ventá secundaria quede visible despois de cada operación
          ventaSecundaria.focus();
        } else {
          // Controlar que a xanela está aberta, no caso de que fose pechada amosar unha mensaxe de erro.
          alert("Non se puido abrir a xanela secundaria.");
        }
      }
    </script>
  </body>
</html>
